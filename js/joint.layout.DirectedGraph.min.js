/*! JointJS v0.7.0 - JavaScript diagramming library  2013-11-04 


This Source Code Form is subject to the terms of the Mozilla Public
License, v. 2.0. If a copy of the MPL was not distributed with this
file, You can obtain one at http://mozilla.org/MPL/2.0/.
 */
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a){var b=self;b.dagre=a("./index")},{"./index":2}],2:[function(a,b,c){c.Digraph=a("graphlib").Digraph,c.Graph=a("graphlib").Graph,c.layout=a("./lib/layout/layout"),c.version=a("./lib/version")},{"./lib/layout/layout":4,"./lib/version":9,graphlib:10}],3:[function(a,b){function c(a,b){f.createTimer();var c=f.createTimer().wrap("Acyclic Phase",d)(a);b>=2&&console.log("Acyclic Phase: reversed "+c+" edge(s)")}function d(a){function b(f){f in d||(d[f]=c[f]=!0,a.outEdges(f).forEach(function(d){var g,h=a.target(d);h in c?(g=a.edge(d),a.delEdge(d),g.reversed=!0,++e,a.addEdge(d,h,f,g)):b(h)}),delete c[f])}var c={},d={},e=0;return a.eachNode(function(a){b(a)}),e}function e(a){a.eachEdge(function(b,c,d,e){e.reversed&&(delete e.reversed,a.delEdge(b),a.addEdge(b,d,c,e))})}var f=a("../util");b.exports=c,b.exports.undo=e},{"../util":8}],4:[function(a,b){var c=a("../util"),d=a("./rank"),e=a("./acyclic"),f=a("graphlib").Digraph,g=a("graphlib").Graph,h=a("graphlib").data.Set;b.exports=function(){function b(a){var b=new f;return a.eachNode(function(a,c){void 0===c&&(c={}),b.addNode(a,{width:c.width,height:c.height})}),a.eachEdge(function(c,d,e,f){void 0===f&&(f={});var g={e:c,minLen:f.minLen||1,width:f.width||0,height:f.height||0,points:[]};b.addEdge(null,d,e,g),a.isDirected()||b.addEdge(null,e,d,g)}),b}function i(a){var c,f=t.rankSep();try{return c=b(a),0===c.order()?c:(c.eachEdge(function(a,b,c,d){d.minLen*=2}),t.rankSep(f/2),e(c,p.debugLevel),a.isDirected()||j(c),d(c,p.debugLevel),k(c),r.run(c),s.run(c),l(c),m(c),e.undo(c),n(c,a.isDirected()))}finally{t.rankSep(f)}}function j(a){var b=new h;a.eachEdge(function(c,d,e,f){b.has(f.e)&&a.delEdge(c),b.add(f.e)})}function k(a){var b=0;a.eachEdge(function(c,d,e,f){var g=a.node(d).rank,h=a.node(e).rank;if(h>g+1){for(var i=d,j=g+1,k=0;h>j;++j,++k){var l="_D"+ ++b,m={width:f.width,height:f.height,edge:{id:c,source:d,target:e,attrs:f},rank:j,dummy:!0};0===k?m.index=0:j+1===h&&(m.index=1),a.addNode(l,m),a.addEdge(null,i,l,{}),i=l}a.addEdge(null,i,e,{}),a.delEdge(c)}})}function l(a){a.eachNode(function(b,c){if(c.dummy&&"index"in c){var d=c.edge;a.hasEdge(d.id)||a.addEdge(d.id,d.source,d.target,d.attrs);var e=a.edge(d.id).points;e[c.index]={x:c.x,y:c.y,ul:c.ul,ur:c.ur,dl:c.dl,dr:c.dr},a.delNode(b)}})}function m(a){a.eachEdge(function(a,b,c,d){d.reversed&&d.points.reverse()})}function n(a,b){var c=b?new f:new g;return a.eachNode(function(a,b){c.addNode(a,b)}),a.eachEdge(function(a,b,d,e){c.addEdge("e"in e?e.e:a,b,d,e),delete e.e}),c}function o(a){return function(){return arguments.length?(a.apply(null,arguments),t):a()}}var p={debugLevel:0},q=c.createTimer(),r=a("./order")(),s=a("./position")(),t={};return t.orderIters=o(r.iterations),t.nodeSep=o(s.nodeSep),t.edgeSep=o(s.edgeSep),t.universalSep=o(s.universalSep),t.rankSep=o(s.rankSep),t.rankDir=o(s.rankDir),t.debugAlignment=o(s.debugAlignment),t.debugLevel=c.propertyAccessor(t,p,"debugLevel",function(a){q.enabled(a),r.debugLevel(a),s.debugLevel(a)}),t.run=q.wrap("Total layout",i),t._normalize=k,t}},{"../util":8,"./acyclic":3,"./order":5,"./position":6,"./rank":7,graphlib:10}],5:[function(a,b){function c(a){var b={};return a.forEach(function(a,c){b[a]=c}),b}var d=a("../util");b.exports=function(){function a(a){var c=b(a),d=j(c),e=k(a,c);m.debugLevel>=2&&console.log("Order phase start cross count: "+e);var f,h,i;for(h=0,i=0;4>i&&h<m.iterations;++h,++i)f=g(a,h,c),e>f&&(d=j(c),e=f,i=0),m.debugLevel>=3&&console.log("Order phase iter "+h+" cross count: "+e);return d.forEach(function(b){b.forEach(function(b,c){a.node(b).order=c})}),m.debugLevel>=2&&(console.log("Order iterations: "+h),console.log("Order phase best cross count: "+e)),m.debugLevel>=4&&(console.log("Final layering:"),d.forEach(function(a,b){console.log("Layer: "+b,a)})),d}function b(a){var b=[];return a.eachNode(function(a,c){var d=b[c.rank]||(b[c.rank]=[]);d.push(a)}),b}function e(a){return function(b){var c=[];return a.inEdges(b).forEach(function(b){c.push(a.source(b))}),c}}function f(a){return function(b){var c=[];return a.outEdges(b).forEach(function(b){c.push(a.target(b))}),c}}function g(a,b,d){var g;if(0===b%2)for(g=1;g<d.length;++g)h(d[g],e(a),c(d[g-1]));else for(g=d.length-2;g>=0;--g)h(d[g],f(a),c(d[g+1]));return k(a,d)}function h(a,b,d){var e=c(a),f=i(a,b,d),g=a.filter(function(a){return-1!==f[a]});g.sort(function(a,b){return f[a]-f[b]||e[a]-e[b]});for(var h=a.length-1;h>=0;--h)-1!==f[a[h]]&&(a[h]=g.pop())}function i(a,b,c){var e={};return a.forEach(function(a){var f=b(a),g=-1;f.length>0&&(g=d.sum(f.map(function(a){return c[a]}))/f.length),e[a]=g}),e}function j(a){return a.map(function(a){return a.slice(0)})}function k(a,b){var c,d=0;return b.forEach(function(b){c&&(d+=l(a,c,b)),c=b}),d}function l(a,b,d){var e=c(d),f=[];b.forEach(function(b){var c=[];a.outEdges(b).forEach(function(b){c.push(e[a.target(b)])}),c.sort(function(a,b){return a-b}),f=f.concat(c)});for(var g=1;g<d.length;)g<<=1;var h=2*g-1;g-=1;for(var i=[],j=0;h>j;++j)i[j]=0;var k=0;return f.forEach(function(a){var b=a+g;for(++i[b];b>0;)b%2&&(k+=i[b+1]),b=b-1>>1,++i[b]}),k}var m={iterations:24,debugLevel:0},n=d.createTimer(),o={};return o.iterations=d.propertyAccessor(o,m,"iterations"),o.debugLevel=d.propertyAccessor(o,m,"debugLevel",function(a){n.enabled(a)}),o._initOrder=b,o.run=n.wrap("Order Phase",a),o.crossCount=k,o.bilayerCrossCount=l,o}},{"../util":8}],6:[function(a,b){var c=a("../util");b.exports=function(){function a(a){var b=[];a.eachNode(function(a,c){var d=b[c.rank]||(b[c.rank]=[]);d[c.order]=a});var g=d(a,b),h={};["u","d"].forEach(function(c){"d"===c&&b.reverse(),["l","r"].forEach(function(d){"r"===d&&k(b);var i=c+d,l=e(a,b,g,"u"===c?"predecessors":"successors");h[i]=f(a,b,l.pos,l.root,l.align),s.debugLevel>=3&&r(c+d,a,b,h[i]),"r"===d&&j(h[i]),"r"===d&&k(b)}),"d"===c&&b.reverse()}),i(a,b,h),a.eachNode(function(b){var c=[];for(var d in h)p(d,a,b,h[d][b]),c.push(h[d][b]);c.sort(function(a,b){return a-b}),o(a,b,(c[1]+c[2])/2)});var n=c.min(a.nodes().map(function(b){return o(a,b)-l(a,b)/2}));a.eachNode(function(b){o(a,b,o(a,b)-n)});var t=0;b.forEach(function(b){var d=c.max(b.map(function(b){return m(a,b)}));t+=d/2,b.forEach(function(b){q(a,b,t)}),t+=d/2+s.rankSep})}function b(a,b){return b>a?a.toString().length+":"+a+"-"+b:b.toString().length+":"+b+"-"+a}function d(a,c){var d={},e={};if(c.length<=2)return d;c[1].forEach(function(a,b){e[a]=b});for(var f=1;f<c.length-1;++f)for(var g=c[f],h=c[f+1],i=0,j=0,k=0;k<h.length;++k){var l=h[k];e[l]=k;var m=void 0;if(a.node(l).dummy){var n=a.predecessors(l)[0];a.node(n).dummy&&(m=e[n])}if(void 0===m&&k===h.length-1&&(m=g.length-1),void 0!==m){for(;k>=j;++j)a.predecessors(h[j]).forEach(function(a){var c=e[a];(i>c||c>m)&&(d[b(h[j],a)]=!0)});i=m}}return d}function e(a,c,d,e){var f={},g={},h={};return c.forEach(function(a){a.forEach(function(a,b){g[a]=a,h[a]=a,f[a]=b})}),c.forEach(function(c){var i=-1;c.forEach(function(c){var j,k=a[e](c);k.length>0&&(k.sort(function(a,b){return f[a]-f[b]}),j=(k.length-1)/2,k.slice(Math.floor(j),Math.ceil(j)+1).forEach(function(a){h[c]===c&&!d[b(a,c)]&&i<f[a]&&(h[a]=c,h[c]=g[c]=g[a],i=f[a])}))})}),{pos:f,root:g,align:h}}function f(a,b,d,e,f){function g(a,b,c){j[a][b]=b in j[a]?Math.min(j[a][b],c):c}function h(b){if(!(b in m)){m[b]=0;var c=b;do{if(d[c]>0){var j=e[l[c]];h(j),i[b]===b&&(i[b]=i[j]);var k=n(a,l[c])+n(a,c);i[b]!==i[j]?g(i[j],i[b],m[b]-m[j]-k):m[b]=Math.max(m[b],m[j]+k)}c=f[c]}while(c!==b)}}var i={},j={},k={},l={},m={};return b.forEach(function(a){a.forEach(function(b,c){i[b]=b,j[b]={},c>0&&(l[b]=a[c-1])})}),c.values(e).forEach(function(a){h(a)}),b.forEach(function(a){a.forEach(function(a){if(m[a]=m[e[a]],a===e[a]&&a===i[a]){var b=0;a in j&&Object.keys(j[a]).length>0&&(b=c.min(Object.keys(j[a]).map(function(b){return j[a][b]+(b in k?k[b]:0)}))),k[a]=b}})}),b.forEach(function(a){a.forEach(function(a){m[a]+=k[i[e[a]]]||0})}),m}function g(a,b,d){return c.min(b.map(function(a){var b=a[0];return d[b]}))}function h(a,b,d){return c.max(b.map(function(a){var b=a[a.length-1];return d[b]}))}function i(a,b,c){var d,e={},f={},i={},j=Number.POSITIVE_INFINITY;for(var k in c){var l=c[k];e[k]=g(a,b,l),f[k]=h(a,b,l);var m=f[k]-e[k];j>m&&(j=m,d=k)}["u","d"].forEach(function(a){["l","r"].forEach(function(b){var c=a+b;i[c]="l"===b?e[d]-e[c]:f[d]-f[c]})});for(var k in c)a.eachNode(function(a){c[k][a]+=i[k]})}function j(a){for(var b in a)a[b]=-a[b]}function k(a){a.forEach(function(a){a.reverse()})}function l(a,b){switch(s.rankDir){case"LR":return a.node(b).height;default:return a.node(b).width}}function m(a,b){switch(s.rankDir){case"LR":return a.node(b).width;default:return a.node(b).height}}function n(a,b){if(null!==s.universalSep)return s.universalSep;var c=l(a,b),d=a.node(b).dummy?s.edgeSep:s.nodeSep;return(c+d)/2}function o(a,b,c){switch(s.rankDir){case"LR":if(arguments.length<3)return a.node(b).y;a.node(b).y=c;break;default:if(arguments.length<3)return a.node(b).x;a.node(b).x=c}}function p(a,b,c,d){switch(s.rankDir){case"LR":if(arguments.length<3)return b.node(c)[a];b.node(c)[a]=d;break;default:if(arguments.length<3)return b.node(c)[a];b.node(c)[a]=d}}function q(a,b,c){switch(s.rankDir){case"LR":if(arguments.length<3)return a.node(b).x;a.node(b).x=c;break;default:if(arguments.length<3)return a.node(b).y;a.node(b).y=c}}function r(a,b,c,d){c.forEach(function(c,e){var f,g;c.forEach(function(c){var h=d[c];if(f){var i=n(b,f)+n(b,c);i>h-g&&console.log("Position phase: sep violation. Align: "+a+". Layer: "+e+". "+"U: "+f+" V: "+c+". Actual sep: "+(h-g)+" Expected sep: "+i)}f=c,g=h})})}var s={nodeSep:50,edgeSep:10,universalSep:null,rankSep:30,rankDir:"TB",debugLevel:0},t=c.createTimer(),u={};return u.nodeSep=c.propertyAccessor(u,s,"nodeSep"),u.edgeSep=c.propertyAccessor(u,s,"edgeSep"),u.universalSep=c.propertyAccessor(u,s,"universalSep"),u.rankSep=c.propertyAccessor(u,s,"rankSep"),u.rankDir=c.propertyAccessor(u,s,"rankDir"),u.debugLevel=c.propertyAccessor(u,s,"debugLevel",function(a){t.enabled(a)}),u.run=t.wrap("Position Phase",a),u}},{"../util":8}],7:[function(a,b){function c(a){var b={},c=new PriorityQueue;for(a.eachNode(function(d){c.add(d,a.inEdges(d).length),b[d]=0});c.size()>0;){var d=c.min();if(c.priority(d)>0)throw new Error("Input graph is not acyclic: "+a.toString());c.removeMin();var e=b[d];a.node(d).rank=e,a.outEdges(d).forEach(function(d){var f=a.target(d);b[f]=Math.max(b[f],e+(a.edge(d).minLen||1)),c.decrease(f,c.priority(f)-1)})}}function d(a){function b(b){return Math.abs(a.node(b.u).rank-a.node(b.v).rank)-b.len}function c(){var a,c=Number.POSITIVE_INFINITY;return e.forEach(function(e){if(d.has(e.u)!==d.has(e.v)){var f=b(e);c>f&&(a=d.has(e.u)?{treeNode:e.v,graphNode:e.u,len:-e.len}:{treeNode:e.u,graphNode:e.v,len:e.len},c=f)}}),a}var d=new Set(a.nodes()),e=[],g={};a.eachEdge(function(a,b,c,d){var h=f(b,c);h in g||e.push(g[h]={u:b,v:c,len:1}),g[h].len=Math.max(g[h].len,d.minLen||1)}),d.remove(a.nodes()[0]);for(;d.size()>0;){var h=c();d.remove(h.graphNode),a.node(h.graphNode).rank=a.node(h.treeNode).rank+h.len}}function e(a){var b=g.min(a.nodes().map(function(b){return a.node(b).rank}));a.eachNode(function(a,c){c.rank-=b})}function f(a,b){return b>a?a.length+":"+a+"-"+b:b.length+":"+b+"-"+a}var g=a("../util"),h=a("graphlib").alg.components,i=a("graphlib").filter;PriorityQueue=a("graphlib").data.PriorityQueue,Set=a("graphlib").data.Set,b.exports=function(a,b){var f=g.createTimer(b>=1);f.wrap("Rank phase",function(){c(a),h(a).forEach(function(b){var c=a.filterNodes(i.nodesFromList(b));d(c),e(c)})})()}},{"../util":8,graphlib:10}],8:[function(a,b,c){c.min=function(a){return Math.min.apply(null,a)},c.max=function(a){return Math.max.apply(null,a)},c.all=function(a,b){for(var c=0;c<a.length;++c)if(!b(a[c]))return!1;return!0},c.sum=function(a){return a.reduce(function(a,b){return a+b},0)},c.values=function(a){return Object.keys(a).map(function(b){return a[b]})},c.createTimer=function(a){var b={};return a=a||!1,b.enabled=function(c){return arguments.length?(a=c,b):a},b.wrap=function(b,c){return function(){var d=a?(new Date).getTime():null;try{return c.apply(null,arguments)}finally{d&&console.log(b+" time: "+((new Date).getTime()-d)+"ms")}}},b},c.propertyAccessor=function(a,b,c,d){return function(e){return arguments.length?(b[c]=e,d&&d(e),a):b[c]}}},{}],9:[function(a,b){b.exports="0.3.0"},{}],10:[function(a,b,c){c.Graph=a("./lib/Graph"),c.Digraph=a("./lib/Digraph"),c.CGraph=a("./lib/CGraph"),c.CDigraph=a("./lib/CDigraph"),a("./lib/graph-converters"),c.alg={isAcyclic:a("./lib/alg/isAcyclic"),components:a("./lib/alg/components"),dijkstra:a("./lib/alg/dijkstra"),dijkstraAll:a("./lib/alg/dijkstraAll"),findCycles:a("./lib/alg/findCycles"),floydWarshall:a("./lib/alg/floydWarshall"),prim:a("./lib/alg/prim"),tarjan:a("./lib/alg/tarjan"),topsort:a("./lib/alg/topsort")},c.converter={json:a("./lib/converter/json.js")},c.data={PriorityQueue:a("./lib/data/PriorityQueue"),Set:a("./lib/data/Set")};var d=a("./lib/filter");c.filter={all:d.all,nodesFromList:d.nodesFromList},c.version=a("./lib/version")},{"./lib/CDigraph":12,"./lib/CGraph":13,"./lib/Digraph":14,"./lib/Graph":15,"./lib/alg/components":16,"./lib/alg/dijkstra":17,"./lib/alg/dijkstraAll":18,"./lib/alg/findCycles":19,"./lib/alg/floydWarshall":20,"./lib/alg/isAcyclic":21,"./lib/alg/prim":22,"./lib/alg/tarjan":23,"./lib/alg/topsort":24,"./lib/converter/json.js":26,"./lib/data/PriorityQueue":27,"./lib/data/Set":28,"./lib/filter":29,"./lib/graph-converters":30,"./lib/version":32}],11:[function(a,b){function c(){this._value=void 0,this._nodes={},this._edges={},this._nextId=0}function d(a,b,c){(a[b]||(a[b]=new f)).add(c)}function e(a,b,c){var d=a[b];d.remove(c),0===d.size()&&delete a[b]}var f=(a("./filter"),a("./data/Set"));b.exports=c,c.prototype.order=function(){return Object.keys(this._nodes).length},c.prototype.size=function(){return Object.keys(this._edges).length},c.prototype.graph=function(a){return 0===arguments.length?this._value:(this._value=a,void 0)},c.prototype.hasNode=function(a){return a in this._nodes},c.prototype.node=function(a,b){var c=this._strictGetNode(a);return 1===arguments.length?c.value:(c.value=b,void 0)},c.prototype.nodes=function(){var a=[];return this.eachNode(function(b){a.push(b)}),a},c.prototype.eachNode=function(a){for(var b in this._nodes){var c=this._nodes[b];a(c.id,c.value)}},c.prototype.hasEdge=function(a){return a in this._edges},c.prototype.edge=function(a,b){var c=this._strictGetEdge(a);return 1===arguments.length?c.value:(c.value=b,void 0)},c.prototype.edges=function(){var a=[];return this.eachEdge(function(b){a.push(b)}),a},c.prototype.eachEdge=function(a){for(var b in this._edges){var c=this._edges[b];a(c.id,c.u,c.v,c.value)}},c.prototype.incidentNodes=function(a){var b=this._strictGetEdge(a);return[b.u,b.v]},c.prototype.addNode=function(a,b){if(void 0===a||null===a){do a="_"+ ++this._nextId;while(this.hasNode(a))}else if(this.hasNode(a))throw new Error("Graph already has node '"+a+"':\n"+this.toString());return this._nodes[a]={id:a,value:b},a},c.prototype.delNode=function(a){this._strictGetNode(a),this.incidentEdges(a).forEach(function(a){this.delEdge(a)},this),delete this._nodes[a]},c.prototype._addEdge=function(a,b,c,e,f,g){if(this._strictGetNode(b),this._strictGetNode(c),void 0===a||null===a){do a="_"+ ++this._nextId;while(this.hasEdge(a))}else if(this.hasEdge(a))throw new Error("Graph already has edge '"+a+"':\n"+this.toString());return this._edges[a]={id:a,u:b,v:c,value:e},d(f[c],b,a),d(g[b],c,a),a},c.prototype._delEdge=function(a,b,c){var d=this._strictGetEdge(a);e(b[d.v],d.u,a),e(c[d.u],d.v,a),delete this._edges[a]},c.prototype.copy=function(){var a=new this.constructor;return a.graph(this.graph),this.eachNode(function(b,c){a.addNode(b,c)}),this.eachEdge(function(b,c,d,e){a.addEdge(b,c,d,e)}),a},c.prototype.filterNodes=function(a){var b=this.copy();return this.nodes().forEach(function(c){a(c)||b.delNode(c)}),b},c.prototype._strictGetNode=function(a){var b=this._nodes[a];if(void 0===b)throw new Error("Node '"+a+"' is not in graph:\n"+this.toString());return b},c.prototype._strictGetEdge=function(a){var b=this._edges[a];if(void 0===b)throw new Error("Edge '"+a+"' is not in graph:\n"+this.toString());return b}},{"./data/Set":28,"./filter":29}],12:[function(a,b){var c=a("./Digraph"),d=a("./compoundify"),e=d(c);b.exports=e,e.fromDigraph=function(a){var b=new e,c=a.graph();return void 0!==c&&b.graph(c),a.eachNode(function(a,c){void 0===c?b.addNode(a):b.addNode(a,c)}),a.eachEdge(function(a,c,d,e){void 0===e?b.addEdge(null,c,d):b.addEdge(null,c,d,e)}),b},e.prototype.toString=function(){return"CDigraph "+JSON.stringify(this,null,2)}},{"./Digraph":14,"./compoundify":25}],13:[function(a,b){var c=a("./Graph"),d=a("./compoundify"),e=d(c);b.exports=e,e.fromGraph=function(a){var b=new e,c=a.graph();return void 0!==c&&b.graph(c),a.eachNode(function(a,c){void 0===c?b.addNode(a):b.addNode(a,c)}),a.eachEdge(function(a,c,d,e){void 0===e?b.addEdge(null,c,d):b.addEdge(null,c,d,e)}),b},e.prototype.toString=function(){return"CGraph "+JSON.stringify(this,null,2)}},{"./Graph":15,"./compoundify":25}],14:[function(a,b){function c(){e.call(this),this._inEdges={},this._outEdges={}}var d=a("./util"),e=a("./BaseGraph"),f=a("./data/Set");b.exports=c,c.prototype=new e,c.prototype.constructor=c,c.prototype.isDirected=function(){return!0},c.prototype.successors=function(a){return this._strictGetNode(a),Object.keys(this._outEdges[a]).map(function(a){return this._nodes[a].id},this)},c.prototype.predecessors=function(a){return this._strictGetNode(a),Object.keys(this._inEdges[a]).map(function(a){return this._nodes[a].id},this)},c.prototype.neighbors=function(a){return f.unionAll([this.successors(a),this.predecessors(a)]).keys()},c.prototype.sources=function(){var a=this;return this._filterNodes(function(b){return 0===a.inEdges(b).length})},c.prototype.sinks=function(){var a=this;return this._filterNodes(function(b){return 0===a.outEdges(b).length})},c.prototype.source=function(a){return this._strictGetEdge(a).u},c.prototype.target=function(a){return this._strictGetEdge(a).v},c.prototype.inEdges=function(a,b){this._strictGetNode(a);var c=f.unionAll(d.values(this._inEdges[a])).keys();return arguments.length>1&&(this._strictGetNode(b),c=c.filter(function(a){return this.source(a)===b},this)),c},c.prototype.outEdges=function(a,b){this._strictGetNode(a);var c=f.unionAll(d.values(this._outEdges[a])).keys();return arguments.length>1&&(this._strictGetNode(b),c=c.filter(function(a){return this.target(a)===b},this)),c},c.prototype.incidentEdges=function(a,b){return arguments.length>1?f.unionAll([this.outEdges(a,b),this.outEdges(b,a)]).keys():f.unionAll([this.inEdges(a),this.outEdges(a)]).keys()},c.prototype.toString=function(){return"Digraph "+JSON.stringify(this,null,2)},c.prototype.addNode=function(a,b){return a=e.prototype.addNode.call(this,a,b),this._inEdges[a]={},this._outEdges[a]={},a},c.prototype.delNode=function(a){e.prototype.delNode.call(this,a),delete this._inEdges[a],delete this._outEdges[a]},c.prototype.addEdge=function(a,b,c,d){return e.prototype._addEdge.call(this,a,b,c,d,this._inEdges,this._outEdges)},c.prototype.delEdge=function(a){e.prototype._delEdge.call(this,a,this._inEdges,this._outEdges)},c.prototype._filterNodes=function(a){var b=[];return this.eachNode(function(c){a(c)&&b.push(c)}),b}},{"./BaseGraph":11,"./data/Set":28,"./util":31}],15:[function(a,b){function c(){e.call(this),this._incidentEdges={}}var d=a("./util"),e=a("./BaseGraph"),f=a("./data/Set");b.exports=c,c.prototype=new e,c.prototype.constructor=c,c.prototype.isDirected=function(){return!1},c.prototype.neighbors=function(a){return this._strictGetNode(a),Object.keys(this._incidentEdges[a]).map(function(a){return this._nodes[a].id},this)},c.prototype.incidentEdges=function(a,b){return this._strictGetNode(a),arguments.length>1?(this._strictGetNode(b),b in this._incidentEdges[a]?this._incidentEdges[a][b].keys():[]):f.unionAll(d.values(this._incidentEdges[a])).keys()},c.prototype.toString=function(){return"Graph "+JSON.stringify(this,null,2)},c.prototype.addNode=function(a,b){return a=e.prototype.addNode.call(this,a,b),this._incidentEdges[a]={},a},c.prototype.delNode=function(a){e.prototype.delNode.call(this,a),delete this._incidentEdges[a]},c.prototype.addEdge=function(a,b,c,d){return e.prototype._addEdge.call(this,a,b,c,d,this._incidentEdges,this._incidentEdges)},c.prototype.delEdge=function(a){e.prototype._delEdge.call(this,a,this._incidentEdges,this._incidentEdges)}},{"./BaseGraph":11,"./data/Set":28,"./util":31}],16:[function(a,b){function c(a){function b(c,d){e.has(c)||(e.add(c),d.push(c),a.neighbors(c).forEach(function(a){b(a,d)}))}var c=[],e=new d;return a.nodes().forEach(function(a){var d=[];b(a,d),d.length>0&&c.push(d)}),c}var d=a("../data/Set");b.exports=c},{"../data/Set":28}],17:[function(a,b){function c(a,b,c,e){var f={},g=new d;c=c||function(){return 1},e=e||(a.isDirected()?function(b){return a.outEdges(b)}:function(b){return a.incidentEdges(b)}),a.nodes().forEach(function(a){var c=a===b?0:Number.POSITIVE_INFINITY;f[a]={distance:c},g.add(a,c)});for(var h,i;g.size()>0&&(h=g.removeMin(),i=f[h],i.distance!==Number.POSITIVE_INFINITY);)e(h).forEach(function(b){var d=a.incidentNodes(b),e=d[0]!==h?d[0]:d[1],j=f[e],k=c(b),l=i.distance+k;if(0>k)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+b+" Weight: "+k);l<j.distance&&(j.distance=l,j.predecessor=h,g.decrease(e,l))});return f}var d=a("../data/PriorityQueue");a("../Digraph"),b.exports=c},{"../Digraph":14,"../data/PriorityQueue":27}],18:[function(a,b){function c(a,b,c){var e={};return a.nodes().forEach(function(f){e[f]=d(a,f,b,c)}),e}var d=a("./dijkstra");b.exports=c},{"./dijkstra":17}],19:[function(a,b){function c(a){return d(a).filter(function(a){return a.length>1})}var d=a("./tarjan");b.exports=c},{"./tarjan":23}],20:[function(a,b){function c(a,b,c){var d={},e=a.nodes();return b=b||function(){return 1},c=c||(a.isDirected()?function(b){return a.outEdges(b)}:function(b){return a.incidentEdges(b)}),e.forEach(function(f){d[f]={},d[f][f]={distance:0},e.forEach(function(a){f!==a&&(d[f][a]={distance:Number.POSITIVE_INFINITY})}),c(f).forEach(function(c){var e=a.incidentNodes(c),g=e[0]!==f?e[0]:e[1],h=b(c);h<d[f][g].distance&&(d[f][g]={distance:h,predecessor:f})})}),e.forEach(function(a){var b=d[a];e.forEach(function(c){var f=d[c];e.forEach(function(c){var d=f[a],e=b[c],g=f[c],h=d.distance+e.distance;h<g.distance&&(g.distance=h,g.predecessor=e.predecessor)})})}),d}a("../Digraph"),b.exports=c},{"../Digraph":14}],21:[function(a,b){function c(a){try{d(a)}catch(b){if(b instanceof d.CycleException)return!1;throw b}return!0}var d=a("./topsort");b.exports=c},{"./topsort":24}],22:[function(a,b){function c(a,b){var c=new d,f={},g=new e;if(0===a.order())return c;a.eachNode(function(a){g.add(a,Number.POSITIVE_INFINITY),c.addNode(a)}),g.decrease(a.nodes()[0],0);for(var h=!1;g.size()>0;){var i=g.removeMin();if(i in f)c.addEdge(null,i,f[i]);else{if(h)throw new Error("Input graph is not connected: "+a);h=!0}a.incidentEdges(i).forEach(function(c){var d=a.incidentNodes(c),e=d[0]!==i?d[0]:d[1],h=g.priority(e);if(void 0!==h){var j=b(c);h>j&&(f[e]=i,g.decrease(e,j))}})}return c}var d=a("../Graph"),e=a("../data/PriorityQueue");b.exports=c},{"../Graph":15,"../data/PriorityQueue":27}],23:[function(a,b){function c(a){function b(g){var h=e[g]={onStack:!0,lowlink:c,index:c++};if(d.push(g),a.successors(g).forEach(function(a){a in e?e[a].onStack&&(h.lowlink=Math.min(h.lowlink,e[a].index)):(b(a),h.lowlink=Math.min(h.lowlink,e[a].lowlink))}),h.lowlink===h.index){var i,j=[];do i=d.pop(),e[i].onStack=!1,j.push(i);while(g!==i);f.push(j)}}if(!a.isDirected())throw new Error("tarjan can only be applied to a directed graph. Bad input: "+a);var c=0,d=[],e={},f=[];return a.nodes().forEach(function(a){a in e||b(a)}),f}a("../Digraph"),b.exports=c},{"../Digraph":14}],24:[function(a,b){function c(a){function b(g){if(g in e)throw new d;g in c||(e[g]=!0,c[g]=!0,a.predecessors(g).forEach(function(a){b(a)}),delete e[g],f.push(g))}if(!a.isDirected())throw new Error("topsort can only be applied to a directed graph. Bad input: "+a);var c={},e={},f=[],g=a.sinks();if(0!==a.order()&&0===g.length)throw new d;return a.sinks().forEach(function(a){b(a)}),f}function d(){}a("../Digraph"),b.exports=c,c.CycleException=d,d.prototype.toString=function(){return"Graph has at least one cycle"}},{"../Digraph":14}],25:[function(a,b){function c(a){function b(){a.call(this),this._parents={},this._children={"null":new d}}return b.prototype=new a,b.prototype.constructor=b,b.prototype.parent=function(a,b){if(this._strictGetNode(a),arguments.length<2)return this._parents[a];if(a===b)throw new Error("Cannot make "+a+" a parent of itself");null!==b&&this._strictGetNode(b),this._children[this._parents[a]].remove(a),this._parents[a]=b,this._children[b].add(a)},b.prototype.children=function(a){return null!==a&&this._strictGetNode(a),this._children[a].keys()},b.prototype.addNode=function(b,c){return b=a.prototype.addNode.call(this,b,c),this._parents[b]=null,this._children[b]=new d,this._children[null].add(b),b},b.prototype.delNode=function(b){var c=this.parent(b);return this._children[b].keys().forEach(function(a){this.parent(a,c)},this),this._children[c].remove(b),delete this._parents[b],delete this._children[b],a.prototype.delNode.call(this,b)},b.prototype.copy=function(){var b=a.prototype.copy.call(this);return this.nodes().forEach(function(a){b.parent(a,this.parent(a))},this),b},b}var d=a("./data/Set");b.exports=c},{"./data/Set":28}],26:[function(a,b,c){function d(a){return Object.prototype.toString.call(a).slice(8,-1)}var e=a("../Graph"),f=a("../Digraph"),g=a("../CGraph"),h=a("../CDigraph");c.decode=function(a,b,c){if(c=c||f,"Array"!==d(a))throw new Error("nodes is not an Array");if("Array"!==d(b))throw new Error("edges is not an Array");if("string"==typeof c)switch(c){case"graph":c=e;break;case"digraph":c=f;break;case"cgraph":c=g;break;case"cdigraph":c=h;break;default:throw new Error("Unrecognized graph type: "+c)}var i=new c;return a.forEach(function(a){i.addNode(a.id,a.value)}),i.parent&&a.forEach(function(a){a.children&&a.children.forEach(function(b){i.parent(b,a.id)})}),b.forEach(function(a){i.addEdge(a.id,a.u,a.v,a.value)}),i},c.encode=function(a){var b=[],c=[];a.eachNode(function(c,d){var e={id:c,value:d};if(a.children){var f=a.children(c);f.length&&(e.children=f)}b.push(e)}),a.eachEdge(function(a,b,d,e){c.push({id:a,u:b,v:d,value:e})});var d;if(a instanceof h)d="cdigraph";else if(a instanceof g)d="cgraph";else if(a instanceof f)d="digraph";else{if(!(a instanceof e))throw new Error("Couldn't determine type of graph: "+a);d="graph"}return{nodes:b,edges:c,type:d}}},{"../CDigraph":12,"../CGraph":13,"../Digraph":14,"../Graph":15}],27:[function(a,b){function c(){this._arr=[],this._keyIndices={}}b.exports=c,c.prototype.size=function(){return this._arr.length},c.prototype.keys=function(){return this._arr.map(function(a){return a.key})},c.prototype.has=function(a){return a in this._keyIndices},c.prototype.priority=function(a){var b=this._keyIndices[a];return void 0!==b?this._arr[b].priority:void 0},c.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},c.prototype.add=function(a,b){if(!(a in this._keyIndices)){var c={key:a,priority:b},d=this._arr.length;return this._keyIndices[a]=d,this._arr.push(c),this._decrease(d),!0}return!1},c.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var a=this._arr.pop();return delete this._keyIndices[a.key],this._heapify(0),a.key},c.prototype.decrease=function(a,b){var c=this._keyIndices[a];if(b>this._arr[c].priority)throw new Error("New priority is greater than current priority. Key: "+a+" Old: "+this._arr[c].priority+" New: "+b);this._arr[c].priority=b,this._decrease(c)},c.prototype._heapify=function(a){var b=this._arr,c=2*a,d=c+1,e=a;c<b.length&&(e=b[c].priority<b[e].priority?c:e,d<b.length&&(e=b[d].priority<b[e].priority?d:e),e!==a&&(this._swap(a,e),this._heapify(e)))},c.prototype._decrease=function(a){for(var b,c=this._arr,d=c[a].priority;a>0&&(b=a>>1,!(c[b].priority<d));)this._swap(a,b),a=b},c.prototype._swap=function(a,b){var c=this._arr,d=this._keyIndices,e=c[a];c[a]=c[b],c[b]=e,d[c[a].key]=a,d[c[b].key]=b}},{}],28:[function(a,b){function c(a){this._size=0,this._keys={},a&&a.forEach(function(a){this.add(a)},this)}var d=a("../util");b.exports=c,c.intersectAll=function(a){if(0===a.length)return new c;var b=new c(a[0].keys());return a.forEach(function(a){b=b.intersect(a)}),b},c.unionAll=function(a){var b=new c;return a.forEach(function(a){b=b.union(a)}),b},c.prototype.size=function(){return this._size},c.prototype.keys=function(){return d.values(this._keys)},c.prototype.has=function(a){return a in this._keys},c.prototype.add=function(a){return a in this._keys?!1:(this._keys[a]=a,++this._size,!0)},c.prototype.remove=function(a){return a in this._keys?(delete this._keys[a],--this._size,!0):!1},c.prototype.intersect=function(a){a.keys||(a=new c(a));var b=new c;return this.keys().forEach(function(c){a.has(c)&&b.add(c)}),b},c.prototype.union=function(a){a instanceof c||(a=new c(a));var b=new c(this.keys());return a.keys().forEach(function(a){b.add(a)}),b}},{"../util":31}],29:[function(a,b,c){var d=a("./data/Set");c.all=function(){return function(){return!0}},c.nodesFromList=function(a){var b=new d(a);return function(a){return b.has(a)}}},{"./data/Set":28}],30:[function(a){var b=a("./Graph"),c=a("./Digraph");b.prototype.toDigraph=b.prototype.asDirected=function(){var a=new c;return this.eachNode(function(b,c){a.addNode(b,c)}),this.eachEdge(function(b,c,d,e){a.addEdge(null,c,d,e),a.addEdge(null,d,c,e)}),a},c.prototype.toGraph=c.prototype.asUndirected=function(){var a=new b;return this.eachNode(function(b,c){a.addNode(b,c)}),this.eachEdge(function(b,c,d,e){a.addEdge(b,c,d,e)}),a}},{"./Digraph":14,"./Graph":15}],31:[function(a,b,c){c.values=function(a){return Object.keys(a).map(function(b){return a[b]})}},{}],32:[function(a,b){b.exports="0.5.7"},{}]},{},[1]),joint.layout.DirectedGraph={layout:function(a,b){b=b||{};var c=this._prepareData(a),d=dagre.layout();b.debugLevel&&d.debugLevel(b.debugLevel),b.rankDir&&d.rankDir(b.rankDir),b.rankSep&&d.rankSep(b.rankSep),b.edgeSep&&d.edgeSep(b.edgeSep),b.nodeSep&&d.nodeSep(b.nodeSep);var e=d.run(c);e.eachNode(function(b,c){c.dummy||a.get("cells").get(b).set("position",{x:c.x,y:c.y})}),b.setLinkVertices&&e.eachEdge(function(b,c,d,e){var f=a.get("cells").get(b);f&&a.get("cells").get(b).set("vertices",e.points)})},_prepareData:function(a){var b=new dagre.Digraph;return a.get("cells").each(function(a){a instanceof joint.dia.Element&&(b.hasNode(a.id)||b.addNode(a.id,{width:a.get("size").width,height:a.get("size").height}))}),a.get("cells").each(function(a){if(a instanceof joint.dia.Link&&!b.hasEdge(a.id)){var c=a.get("source").id,d=a.get("target").id;b.addEdge(a.id,c,d)}}),b}};